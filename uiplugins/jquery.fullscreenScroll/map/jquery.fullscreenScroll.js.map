{"version":3,"sources":["jquery.fullscreenScroll.js"],"names":["$","fn","fullscreenScroll","command","data","noop","erTxt","txt","join","implementsShowNext","src","done","root","this","ww","window","width","curruntDisplayer","tempLayer","hide","bind","el","ew","renderDisplayer","call","css","left","top","margin-top","height","show","animate","duration","parseInt","easing","progress","aPromised","_progress","time","complete","remove","removeClass","addClass","append","implementsShowPrev","right","_progress2","defaultRenderDisplayer","useLeft","eh","margin-left","margin-right","init","_ref","_ref$renderDisplayer","undefined","_ref$showPrev","showPrev","_ref$showNext","showNext","_ref$onanimatecomplete","onanimatecomplete","_ref$duration","_ref$easing","extend","fullscreenScrollaFn01","x","t","b","c","d","Math","cos","PI","fullscreenScrollaFn02","s","p","a","abs","asin","pow","sin","fullscreenScrollaFn03","Error","style","overflow","displayer","img","linker","link","prev","jump","next","isPrev","i","fullscreenData","l","length","showIndex","index","rev","_ref2","_this","isLock","attr","getCurIndex","isGetter","cmdName","api","curIndex"],"mappings":"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","file":"jquery.fullscreenScroll.js","sourcesContent":["/**author:z.w*/\r\n$.fn.fullscreenScroll = function(command, data) {\r\n  if(DEBUG){\r\n    console.log(\"%c兄弟你正在使用的是debug的release,要product release的话请去gulpfile里面修改DEBUG=false\",\"color:green;font-size:12px;font-family:'Consolas';border:1px dotted;line-height:25px;\");\r\n  }\r\n  function noop() {}\r\n\r\n  function erTxt(txt) {\r\n    return [\"[fullscreenScroll]\", txt].join('');\r\n  }\r\n\r\n  function implementsShowNext(src, done) {\r\n    var root = $(this);\r\n    var ww = $(window).width();\r\n    var curruntDisplayer = $(\".fullscreenScroll_displayer\", this);\r\n\r\n    var tempLayer = $('<img class=\"fullscreenScroll_displayerTemp\" src=\"' + src + '\"/>').hide().bind(\"load\", function() {\r\n      var el = $(this),\r\n        ew = el.width();\r\n      var renderDisplayer = $(root).data(\"renderDisplayer\");\r\n      renderDisplayer.call(root, true);\r\n\r\n      el.css({\r\n        left: ww,\r\n        top: \"50%\",\r\n        \"margin-top\": -el.height() / 2\r\n      }).show();\r\n\r\n      tempLayer.animate({\r\n        left: -(ew - ww) / 2\r\n      }, {\r\n        duration: parseInt($(root).data(\"fullscreenScroll_duration\")),\r\n        easing: $(root).data(\"fullscreenScroll_easing\"),\r\n        progress: function progress(aPromised, _progress, time) {\r\n          curruntDisplayer.css({\r\n            left: 50 - 50 * _progress + \"%\"\r\n          });\r\n        },\r\n        complete: function complete() {\r\n          curruntDisplayer.remove();\r\n          tempLayer.removeClass(\"fullscreenScroll_displayerTemp\").addClass(\"fullscreenScroll_displayer\");\r\n          renderDisplayer.call(root, false);\r\n          $(root).data(\"onanimatecomplete\")();\r\n          done();\r\n        }\r\n      });\r\n    });\r\n\r\n    root.append(tempLayer);\r\n  }\r\n\r\n  function implementsShowPrev(src, done) {\r\n    var root = $(this);\r\n    var ww = $(window).width();\r\n    var curruntDisplayer = $(\".fullscreenScroll_displayer\", root);\r\n\r\n    var tempLayer = $('<img class=\"fullscreenScroll_displayerTemp\" src=\"' + src + '\"/>').hide().bind(\"load\", function() {\r\n\r\n      var el = $(this),\r\n        ew = el.width();\r\n      var renderDisplayer = $(root).data(\"renderDisplayer\");\r\n      renderDisplayer.call(root, false);\r\n\r\n      el.css({\r\n        right: ww,\r\n        top: \"50%\",\r\n        \"margin-top\": -el.height() / 2\r\n      }).show();\r\n\r\n      tempLayer.animate({\r\n        right: -(ew - ww) / 2\r\n      }, {\r\n        duration:parseInt($(root).data(\"fullscreenScroll_duration\")),\r\n        easing: $(root).data(\"fullscreenScroll_easing\"),\r\n        progress: function progress(aPromised, _progress2, time) {\r\n          curruntDisplayer.css({\r\n            right: 50 - 50 * _progress2 + \"%\"\r\n          });\r\n        },\r\n        complete: function complete() {\r\n          curruntDisplayer.remove();\r\n          tempLayer.removeClass(\"fullscreenScroll_displayerTemp\").addClass(\"fullscreenScroll_displayer\");\r\n          renderDisplayer.call(root, false);\r\n          $(root).data(\"onanimatecomplete\")();\r\n          done();\r\n        }\r\n      });\r\n    });\r\n\r\n    root.append(tempLayer);\r\n  }\r\n\r\n  function defaultRenderDisplayer(useLeft) {\r\n    var el = $(\".fullscreenScroll_displayer\", this);\r\n    var ew = el.width(),\r\n      eh = el.height();\r\n    if (useLeft) {\r\n      el.css({\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        \"margin-left\": -ew / 2,\r\n        \"margin-top\": -eh / 2,\r\n        right: \"auto\",\r\n        \"margin-right\": \"0\"\r\n      });\r\n    } else {\r\n      el.css({\r\n        top: \"50%\",\r\n        right: \"50%\",\r\n        \"margin-right\": -ew / 2,\r\n        \"margin-top\": -eh / 2,\r\n        left: \"auto\",\r\n        \"margin-left\": \"0\"\r\n      });\r\n    }\r\n  }\r\n\r\n  function init({\r\n    data, renderDisplayer = defaultRenderDisplayer, showPrev = implementsShowPrev, showNext = implementsShowNext, onanimatecomplete = noop, duration = 500, easing = \"fullscreenScrollaFn01\"\r\n  }) {\r\n    $.extend($.easing, {\r\n      fullscreenScrollaFn01: function(x, t, b, c, d) {\r\n        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;;\r\n      },\r\n      fullscreenScrollaFn02: function(x, t, b, c, d) {\r\n        var s = 1.70158;\r\n        var p = 0;\r\n        var a = c;\r\n        if (t == 0) return b;\r\n        if ((t /= d) == 1) return b + c;\r\n        if (!p) p = d * .3;\r\n        if (a < Math.abs(c)) {\r\n          a = c;\r\n          var s = p / 4;\r\n        } else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\r\n      },\r\n      fullscreenScrollaFn03: function(x, t, b, c, d, s) {\r\n        if (s == undefined) s = 1.70158;\r\n        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\r\n        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\r\n      }\r\n    })\r\n    var root = $(this);\r\n    /*验证一下*/\r\n    if (root.data(\"hasInit\")) {\r\n      return false;\r\n    }\r\n    if (!data) {\r\n      throw new Error(erTxt(\"data.data needed\"));\r\n    }\r\n    var root = $(this);\r\n    /*重写默认主界面初始化样式*/\r\n\r\n    /*可以实现的方法有renderDisplayer*/\r\n    /*showNext和showPrev方法是动画滚动方法*/\r\n    $(this).data(\"renderDisplayer\", renderDisplayer);\r\n    $(this).data(\"fullscreenScroll_duration\", parseInt(duration));\r\n    $(this).data(\"fullscreenScroll_easing\", easing);\r\n    $(this).data(\"showNext\", showNext);\r\n    $(this).data(\"showPrev\", showPrev);\r\n    $(this).data(\"onanimatecomplete\", onanimatecomplete);\r\n\r\n    /*样式注入*/\r\n    var style = `\r\n      .fullscreenScroll_link{\r\n        width:100%;\r\n        height:100%;\r\n        position:absolute;\r\n        z-index:3;\r\n      }\r\n      .fullscreenScroll_wrap {\r\n        position: relative;\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 450px;\r\n      }\r\n\r\n      .fullscreenScroll_displayer,\r\n      .fullscreenScroll_displayerTemp {\r\n        position: absolute;\r\n        margin: 0;\r\n        padding: 0;\r\n      }\r\n\r\n      .fullscreenScroll_displayer {\r\n        z-index: 1;\r\n      }\r\n\r\n      .fullscreenScroll_displayerTemp {\r\n        z-index: 2;\r\n        box-shadow: -4px 0px 8px -3px black;\r\n      }\r\n    `;\r\n    $(\"head\").append([\"<style>\", style, \"</style>\"].join(\"\"));\r\n\r\n    root.data(\"fullscreenData\", data);\r\n\r\n    root.data(\"curIndex\", 0);\r\n\r\n    root.css({\r\n      \"overflow\": \"hidden\"\r\n    }).addClass(\"fullscreenScroll_wrap\");\r\n\r\n\r\n    var displayer = $('<img class=\"fullscreenScroll_displayer\" src=\"' + data[0].img + '\">')\r\n      .bind(\"load\", function() {\r\n        var renderDisplayer = $(root).data(\"renderDisplayer\");\r\n        renderDisplayer.call(root, true);\r\n      });\r\n    var linker = $('<a href=\"' + data[0].link + '\" class=\"fullscreenScroll_link\"></a>')\r\n    root.append(displayer).append(linker);\r\n\r\n    root.data(\"hasInit\", true);\r\n  }\r\n\r\n  function prev(data) {\r\n    jump.call(this, data, true);\r\n  }\r\n\r\n  function next(data) {\r\n    jump.call(this, data, false)\r\n  }\r\n\r\n  function jump(data, isPrev) {\r\n\r\n    var i = $(this).data(\"curIndex\");\r\n\r\n    var fullscreenData = $(this).data(\"fullscreenData\");\r\n\r\n    var l = fullscreenData.length;\r\n\r\n    if (isPrev) {\r\n      if (i - 1 < 0) {\r\n        i = l - 1;\r\n      } else {\r\n        i--;\r\n      }\r\n    } else {\r\n      if (i + 1 >= l) {\r\n        i = 0;\r\n      } else {\r\n        i++;\r\n      }\r\n    }\r\n\r\n    showIndex.call(this, {\r\n      index: i,\r\n      rev: isPrev ? false : true\r\n    });\r\n\r\n  }\r\n\r\n  function showIndex(_ref2) {\r\n    var isLock = $(this).data(\"fullscreenScrollLocked\");\r\n    if (isLock) {\r\n      return false;\r\n    }\r\n    $(this).data(\"fullscreenScrollLocked\", true);\r\n    var index = _ref2.index;\r\n    var rev = _ref2.rev;\r\n    var fullscreenData = $(this).data(\"fullscreenData\");\r\n    $(this).data(\"curIndex\", index);\r\n    $(\".fullscreenScroll_link\", this).attr(\"href\", fullscreenData[index].link);\r\n    if (rev) {\r\n      $(this).data(\"showNext\").call(this, fullscreenData[index].img, () => $(this).data(\"fullscreenScrollLocked\", false));\r\n    } else {\r\n      $(this).data(\"showPrev\").call(this, fullscreenData[index].img, () => $(this).data(\"fullscreenScrollLocked\", false));\r\n    }\r\n  }\r\n\r\n  function getCurIndex() {\r\n    return parseInt($(this).data(\"curIndex\"));\r\n  }\r\n  var api = {\r\n    next: {\r\n      fn: next\r\n    },\r\n    showIndex: {\r\n      fn: showIndex\r\n    },\r\n    prev: {\r\n      fn: prev\r\n    },\r\n    init: {\r\n      fn: init\r\n    },\r\n    curIndex: {\r\n      fn: getCurIndex,\r\n      isGetter: true\r\n    }\r\n  };\r\n\r\n  function isGetter(cmdName) {\r\n    return !!api[cmdName].isGetter;\r\n  }\r\n\r\n  if (api[command]) {\r\n    if (isGetter(command)) {\r\n      return api[command].fn.call(this, data);\r\n    } else {\r\n      api[command].fn.call(this, data);\r\n    }\r\n  }\r\n  return $(this);\r\n};\r\n"],"sourceRoot":"/source/"}